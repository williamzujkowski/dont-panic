---
// src/components/Testimonials.astro
import type { TestimonialItem } from '../data/testimonialsData'; // Assuming data structure definition

export interface Props {
  testimonials: TestimonialItem[];
}

const { testimonials } = Astro.props;
---

<section class="testimonials-section">
  <h2>What Others Say</h2>
  <div class="testimonials-grid">
    {testimonials.map((testimonial) => (
      <figure class="testimonial-card">
        <blockquote class="testimonial-quote">
          <p>{testimonial.quote}</p>
        </blockquote>
        <figcaption class="testimonial-author">
          <cite>{testimonial.author}</cite>
          {testimonial.source && <span class="testimonial-source">, {testimonial.source}</span>}
        </figcaption>
      </figure>
    ))}
  </div>
</section>

<style>
  .testimonials-section {
    /* Use global variables for padding and background */
    padding: var(--section-padding-vertical) var(--section-padding-horizontal);
    text-align: center;
    background-color: var(--color-surface); /* Use global surface color */
  }

  .testimonials-section h2 {
    /* Use global variables for spacing and font size */
    margin-bottom: var(--spacing-xl); /* Use global spacing */
    font-size: var(--font-size-h2); /* Use global font size */
    color: var(--color-text); /* Use global text color */
  }

  .testimonials-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--spacing-md); /* Use global spacing */
    text-align: left;
    max-width: 1200px;
    margin: 0 auto; /* Center the grid */
  }

  .testimonial-card {
    background-color: var(--color-background); /* Use global background */
    padding: var(--spacing-md); /* Use global spacing */
    border-radius: var(--border-radius-medium); /* Use global radius */
    box-shadow: var(--shadow-small); /* Use global shadow */
    margin: 0;
    display: flex;
    flex-direction: column;
  }

  .testimonial-quote {
    margin: 0 0 var(--spacing-sm) 0; /* Use global spacing */
    font-style: italic;
    color: var(--color-text-secondary); /* Use global secondary text color */
    flex-grow: 1;
    border-left: 4px solid var(--color-primary); /* Use global primary color */
    padding-left: var(--spacing-sm); /* Use global spacing */
  }

  .testimonial-quote p {
    margin: 0;
  }

  .testimonial-author {
    font-weight: bold;
    color: var(--color-text); /* Use global text color */
    margin-top: var(--spacing-sm); /* Use global spacing */
  }

  .testimonial-author cite {
    font-style: normal;
  }

  .testimonial-source {
    font-weight: normal;
    font-size: var(--font-size-small); /* Use global font size */
    color: var(--color-text-muted); /* Use global muted text color */
  }

  /* Responsive adjustments */
   @media (min-width: 768px) {
     .testimonials-grid {
        gap: var(--spacing-lg); /* Use global spacing */
     }
     .testimonial-card {
        padding: var(--spacing-lg); /* Use global spacing */
     }
   }
</style>
