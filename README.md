# Astro Template Website

[![Use this template](https://img.shields.io/badge/template-use%20this%20template-blue?logo=github)](https://github.com/williamzujkowski/astro-template-website/generate)

A ready-to-use Astro website template featuring essential pages, components, styling, testing, and GitHub Actions deployment to GitHub Pages.

## What This Template Provides

- **GitHub Actions Workflows** for CI/CD, security scanning, and dependency management
- **Issue Templates** for bug reports and feature requests
- **Pull Request Template** to ensure quality contributions
- **Community Health Files** including Code of Conduct, Contributing Guidelines, and Security Policy
- **Dependabot Configuration** for automated dependency updates
- **Repository Configuration Files** and recommended settings

## How to Use This Template

1. Click the "Use this template" button on the GitHub repository
2. Name your new repository and create it
3. Review and customize the included files to fit your specific project needs
4. Update placeholders in files (especially in SECURITY.md)
5. Uncomment relevant sections in configuration files where noted
6. Delete or modify files that do not apply to your project

## Included Components

### GitHub Actions Workflows

- `ci.yml`: Basic CI workflow with linting and testing placeholders
- `codeql-analysis.yml`: Security scanning using GitHub CodeQL
- `dependency-review.yml`: Reviews dependencies for security issues on PRs
- `sync_reports.yml`: Automatically syncs vulnerability reports from a source repository

### Issue & PR Templates

- Bug report template
- Feature request template
- PR template with checklist

### Community Health Files

- `CODE_OF_CONDUCT.md`: Contributor Covenant Code of Conduct
- `CONTRIBUTING.md`: Guidelines for contributing to the project
- `SECURITY.md`: Security policy and vulnerability reporting process

### Configuration Files

- `dependabot.yml`: Automated dependency updates (initially for GitHub Actions)

## Customization Guide

- Review all files and update project-specific information
- For workflows, add language/framework-specific build and test commands
- Update issue templates with project-specific categories/labels
- Configure Dependabot for your project package ecosystems

## License

This template is available under the MIT License.

## Project Plan: dont-panic Repository

This section outlines the specific plan and implementation checklist for the dont-panic repository (the frontend), part of the larger Automated Vulnerability Intelligence Platform (AVIP). This version specifies Astro.js as the frontend framework.

**Reference:** This plan is derived from the main AVIP Project Plan and should be implemented following all standards outlined in CLAUDE.md.

### 1. Vision & Goals (Context)

*   **Overall Vision:** Create an automated platform to monitor vulnerabilities, identify high-priority threats (CVSS >= 9.0, EPSS >= 70%, zero-days), generate LLM-based intelligence reports, and publish them.
*   **This Repository's Role:** To provide a simple, clean, performant, and user-facing web interface using Astro.js that displays the Markdown intelligence reports generated by the vulnerability-intelligence-generator repository. The site itself will be called "Don't Panic".

### 2. Core Principles

*   **Simplicity & Performance:** Focus on effectively displaying the generated Markdown content using Astro's content-first approach. Avoid unnecessary client-side JavaScript.
*   **Automation:** CI/CD pipeline builds and deploys the Astro site whenever new reports are available or code changes.
*   **Readability:** Ensure reports are presented clearly and are easy to navigate.
*   **Standards-Driven:** Adhere to relevant CLAUDE.md standards (e.g., accessibility, testing, Git practices) and Astro best practices.
*   **Decoupling:** Consume reports from a defined source (e.g., synced directory, cloud storage) without tight coupling to the generator's internals.

### 3. Architecture & Workflow

```mermaid
graph TD
    subgraph vulnerability-intelligence-generator [Repo 2: Intelligence Generator]
        ReportOutput[(Markdown Reports)]
    end

    subgraph dont-panic [Repo 3: Frontend (Astro)]
        direction LR
        ReportFetcher(Fetch/Sync Reports) --> BuildProcess(Astro Build Process)
        BuildProcess --> Display(Static Site Display)
    end

    ReportOutput --> ReportFetcher

    %% Styling (Conceptual)
    classDef repo fill:#f9f,stroke:#333,stroke-width:2px;
    class vulnerability-intelligence-generator,dont-panic repo;
```

*   **Workflow:**
    1.  **Report Syncing/Fetching (CI/CD or Trigger):** Markdown reports generated by Repo 2 are copied/synced into the `src/content/reports/` directory (or similar configured content collection) within this repository's source structure.
    2.  **Site Build (CI/CD):** A CI/CD job runs the `astro build` command, which processes the Markdown files (using Astro's content collections) and `.astro` components/layouts into static HTML, CSS, and minimal JS pages.
    3.  **Deployment (CI/CD):** The built static files (typically in the `dist/` directory) are deployed to a hosting provider suitable for static sites.

### 4. Technology Stack

*   **Framework:** Astro.js
*   **UI Components:** Astro Components
*   **Styling:** Tailwind CSS (using `@tailwindcss/vite`)
*   **Package Manager:** npm (or pnpm/yarn)
*   **CI/CD:** GitHub Actions
*   **Hosting:** GitHub Pages (or Netlify, Vercel, Cloudflare Pages, etc.)

### 5. Phased Development (This Repo)

*   **Phase 1 (Implemented):** Initialize Astro project with Tailwind. Setup basic project structure (`src/content/reports`, basic layout, report page). Create basic layout/template (`src/layouts/`, `src/pages/reports/[slug].astro`) to display a single Markdown report from `src/content/`. Setup manual report copying. Setup basic CI/CD for building/testing.
*   **Phase 2 (Implemented):** Implement index page (`src/pages/index.astro`) listing all available reports using Astro's content collections API. Refine styling and layout using Tailwind (created `ReportCard` component). Setup deployment CI/CD (using existing `deploy.yml`).
*   **Phase 3 (Implementation Completed):**
    * ✅ **Automated Report Syncing:** Added workflow to automatically sync reports from the vulnerability-intelligence-generator repository.
    * ✅ **Search Functionality:** Implemented client-side search using Pagefind integration directly in the header.
    * ✅ **Table View & Filtering/Sorting:** Implemented a table-based view for the homepage with client-side filtering, sorting, and URL state persistence.
    * ❌ **Accessibility Improvements:** Need to review and enhance accessibility features.

## How to Run Locally

1.  Clone the repository.
2.  Install dependencies: `npm install` (or `pnpm install` / `yarn install`)
3.  Start the development server: `npm run dev`
4.  Open your browser to `http://localhost:4321` (or the port specified in the console).

## Testing

This project uses [Vitest](https://vitest.dev/) for testing.

- Run all tests: `npm run test`
- Run tests in watch mode: `npm run test:watch`

## Automated Report Syncing

The project includes automated syncing of vulnerability reports from a source repository. This is configured through the `.github/workflows/sync_reports.yml` workflow, which can run on a schedule or be triggered manually.

For details on how the report syncing works, see the [Report Syncing Documentation](./docs/report-syncing.md).

## Search Functionality

The site includes client-side search functionality powered by Pagefind directly in the header. This allows users to search through vulnerability reports without requiring a backend server. The search component is present on all pages for easy access.

For details on how the search functionality works and how to customize it, see the [Search Functionality Documentation](./docs/search-functionality.md).

## Table View with Filtering and Sorting

The homepage features a data-dense table view of vulnerability reports with advanced functionality:

- **Sortable Columns:** Click on column headers to sort by CVE ID, title, CVSS score, EPSS score, severity, zero-day status, or date
- **Text Search:** Filter reports by typing in the search box
- **Severity Filter:** Filter reports by severity level (Critical, High, Medium, Low)
- **Zero-Day Filter:** Show only zero-day vulnerabilities when enabled
- **URL State Persistence:** All filters and sort settings are reflected in the URL, making it easy to share specific views
- **New Report Highlighting:** Reports added since your last visit are highlighted with a subtle animation

All filtering and sorting is performed client-side, ensuring fast response times and no server requirements.

## Future Work and Known Issues

### Future Enhancements

- **Accessibility Improvements:** Conduct a thorough accessibility audit and implement improvements
- **Enhanced Report Visualization:** Add visual charts for CVSS components and timeline visualization
- **Performance Optimization:** Conduct Lighthouse audit and optimize image loading and CSS/JS bundles
- **Test Coverage:** Expand test coverage and improve test reliability

### Known Issues

- Some component tests have been skipped due to JSDOM limitations with newer browser APIs
- The VulnerabilityTable tests currently require a more comprehensive testing setup for proper DOM manipulation
- The table view could benefit from responsive design improvements for very small screens

## Contributing

Contributions to improve this template are welcome! Please see the CONTRIBUTING.md file for guidelines.